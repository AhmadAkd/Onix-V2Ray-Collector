# ๐ค ุฑุงูููุง ฺฉุงูู Telegram Bot ุจุฑุง V2Ray Collector

## ๐ ููุฑุณุช ูุทุงูุจ

- [๐ฏ ููุฏูู](#-ููุฏูู)
- [๐ง ูุตุจ ู ุฑุงูโุงูุฏุงุฒ](#-ูุตุจ-ู-ุฑุงูโุงูุฏุงุฒ)
- [โ๏ธ ูพฺฉุฑุจูุฏ](#๏ธ-ูพฺฉุฑุจูุฏ)
- [๐ ุงุณุชูุงุฏู](#-ุงุณุชูุงุฏู)
- [๐ฑ ุฏุณุชูุฑุงุช](#-ุฏุณุชูุฑุงุช)
- [๐๏ธ ุชูุณุนู](#๏ธ-ุชูุณุนู)
- [โ ุนุจโุงุจ](#-ุนุจโุงุจ)

---

## ๐ฏ ููุฏูู

Telegram Bot ุจุฑุง V2Ray Collector ฺฉ ุฑุจุงุช ูพุดุฑูุชู ู ฺฉุงูู ุงุณุช ฺฉู ุงูฺฉุงู ุฏุณุชุฑุณ ุขุณุงู ุจู ฺฉุงููฺฏโูุง V2Ray ุฑุง ุงุฒ ุทุฑู ุชูฺฏุฑุงู ูุฑุงูู ูโฺฉูุฏ.

### โจ ูฺฺฏโูุง ฺฉูุฏ

- ๐ค **ุฑุจุงุช ฺฉุงูู**: ุชูุงู ุฏุณุชูุฑุงุช ููุฑุฏ ูุงุฒ
- ๐ก **ุฏุณุชุฑุณ ุจู ฺฉุงููฺฏโูุง**: ุฏุฑุงูุช ฺฉุงููฺฏโูุง ูุฎุชูู
- ๐ **ุฏุณุชูโุจูุฏ ุฌุบุฑุงูุง**: ููุชุฑ ุจุฑ ุงุณุงุณ ฺฉุดูุฑ
- ๐ **ูพุฑูุชฺฉูโูุง ูุชููุน**: ูพุดุชุจุงู ุงุฒ ุชูุงู ูพุฑูุชฺฉูโูุง
- ๐ **ุขูุงุฑ Real-time**: ููุงุด ุขูุงุฑ ุฒูุฏู ุณุณุชู
- ๐ **ุณุณุชู ุงุฏูู**: ูุฏุฑุช ฺฉุงูู ุจุฑุง ุงุฏููโูุง
- ๐ **ุฌุณุชุฌู ูพุดุฑูุชู**: ุฌุณุชุฌู ุฏุฑ ฺฉุงููฺฏโูุง
- ๐ข **ุงุดุชุฑุงฺฉ**: ุฏุฑุงูุช ุขูพุฏุชโูุง ุฎูุฏฺฉุงุฑ

---

## ๐ง ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### 1๏ธโฃ **ูพุดโูุงุฒูุง**

```bash
# Python 3.8+
python --version

# ูุตุจ ูุงุจุณุชฺฏโูุง
pip install aiohttp python-telegram-bot
```

### 2๏ธโฃ **ุฏุฑุงูุช Bot Token**

1. ุจู [@BotFather](https://t.me/BotFather) ุฏุฑ ุชูฺฏุฑุงู ูพุงู ุฏูุฏ
2. ุฏุณุชูุฑ `/newbot` ุฑุง ุงุฑุณุงู ฺฉูุฏ
3. ูุงู ุฑุจุงุช ุฑุง ูุงุฑุฏ ฺฉูุฏ: `V2Ray Collector Bot`
4. ูุงู ฺฉุงุฑุจุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ: `v2ray_collector_bot`
5. Bot Token ุฑุง ฺฉูพ ฺฉูุฏ

### 3๏ธโฃ **ุชูุธู Token**

```python
# ุฏุฑ ูุงู config.py ุง .env
TELEGRAM_BOT_TOKEN = "6942899950:AAEDV4iX8jh2zD8be2dPqcADnB7V4xWy7aE"
```

### 4๏ธโฃ **ุฑุงูโุงูุฏุงุฒ ุฑุจุงุช**

```bash
# ุงุฌุฑุง ุฑุจุงุช
python telegram_bot_enhanced.py

# ุง ุงุฌุฑุง ุฏุฑ ูพุณโุฒููู
nohup python telegram_bot_enhanced.py &
```

---

## โ๏ธ ูพฺฉุฑุจูุฏ

### ๐ **ูุชุบุฑูุง ูุญุท**

```bash
# ูุงู .env
TELEGRAM_BOT_TOKEN=6942899950:AAEDV4iX8jh2zD8be2dPqcADnB7V4xWy7aE
TELEGRAM_ADMIN_USERS=123456789,987654321
TELEGRAM_WEBHOOK_URL=https://yourdomain.com/webhook
TELEGRAM_POLLING_INTERVAL=1
```

### ๐ง **ุชูุธูุงุช ูพุดุฑูุชู**

```python
# ุฏุฑ ูุงู telegram_bot_enhanced.py
class EnhancedTelegramBot:
    def __init__(self, bot_token: str):
        self.bot_token = bot_token
        self.admin_users = set([123456789])  # ID ุงุฏููโูุง
        self.commands = self._setup_commands()
```

---

## ๐ ุงุณุชูุงุฏู

### ๐ฏ **ุดุฑูุน ฺฉุงุฑ**

1. ุฑุจุงุช ุฑุง ุฏุฑ ุชูฺฏุฑุงู ูพุฏุง ฺฉูุฏ: `@v2ray_collector_bot`
2. ุฏุณุชูุฑ `/start` ุฑุง ุงุฑุณุงู ฺฉูุฏ
3. ุงุฒ ุฏุณุชูุฑ `/help` ุจุฑุง ูุดุงูุฏู ุฑุงูููุง ุงุณุชูุงุฏู ฺฉูุฏ

### ๐ฑ **ูุญูู ฺฉุงุฑ**

```
ฺฉุงุฑุจุฑ: /start
ุฑุจุงุช: ๐ ุฎูุด ุขูุฏุฏ! ุฑุจุงุช V2Ray Collector ุขูุงุฏู ุฎุฏูุชโุฑุณุงู ุงุณุช.

ฺฉุงุฑุจุฑ: /configs vmess
ุฑุจุงุช: ๐ก ฺฉุงููฺฏโูุง VMess:
vmess://eyJ2IjoiMiIsInBzIjoiVGVzdCIsImFkZCI6InRlc3QuY29tIiwicG9ydCI6IjQ0MyIsImlkIjoiYWFhYSIsInR5cGUiOiJub25lIiwiaG9zdCI6IiIsInRscyI6InRscyJ9

ฺฉุงุฑุจุฑ: /countries
ุฑุจุงุช: ๐ ฺฉุดูุฑูุง ูพุดุชุจุงู ุดุฏู:
๐บ๐ธ ุขูุฑฺฉุง (US)
๐ฉ๐ช ุขููุงู (DE)
๐จ๐ฆ ฺฉุงูุงุฏุง (CA)
...
```

---

## ๐ฑ ุฏุณุชูุฑุงุช

### ๐ง **ุฏุณุชูุฑุงุช ุงุตู**

| ุฏุณุชูุฑ | ุชูุถุญ | ูุซุงู |
|-------|-------|------|
| `/start` | ุดุฑูุน ฺฉุงุฑ ุจุง ุฑุจุงุช | `/start` |
| `/help` | ุฑุงูููุง ฺฉุงูู | `/help` |
| `/stats` | ุขูุงุฑ ฺฉู ุณุณุชู | `/stats` |
| `/ping` | ุชุณุช ุงุชุตุงู | `/ping` |
| `/about` | ุฏุฑุจุงุฑู ุฑุจุงุช | `/about` |

### ๐ก **ุฏุณุชูุฑุงุช ฺฉุงููฺฏ**

| ุฏุณุชูุฑ | ุชูุถุญ | ูุซุงู |
|-------|-------|------|
| `/configs` | ุชูุงู ฺฉุงููฺฏโูุง | `/configs` |
| `/configs vmess` | ฺฉุงููฺฏโูุง VMess | `/configs vmess` |
| `/configs vless` | ฺฉุงููฺฏโูุง VLESS | `/configs vless` |
| `/configs trojan` | ฺฉุงููฺฏโูุง Trojan | `/configs trojan` |
| `/configs ss` | ฺฉุงููฺฏโูุง Shadowsocks | `/configs ss` |

### ๐ **ุฏุณุชูุฑุงุช ุฌุบุฑุงูุง**

| ุฏุณุชูุฑ | ุชูุถุญ | ูุซุงู |
|-------|-------|------|
| `/countries` | ูุณุช ฺฉุดูุฑูุง | `/countries` |
| `/configs US` | ฺฉุงููฺฏโูุง ุขูุฑฺฉุง | `/configs US` |
| `/configs DE` | ฺฉุงููฺฏโูุง ุขููุงู | `/configs DE` |
| `/configs IR` | ฺฉุงููฺฏโูุง ุงุฑุงู | `/configs IR` |

### ๐ **ุฏุณุชูุฑุงุช ุฌุณุชุฌู**

| ุฏุณุชูุฑ | ุชูุถุญ | ูุซุงู |
|-------|-------|------|
| `/search vmess` | ุฌุณุชุฌู VMess | `/search vmess` |
| `/search vless US` | ุฌุณุชุฌู VLESS ุขูุฑฺฉุง | `/search vless US` |
| `/latest` | ุขุฎุฑู ฺฉุงููฺฏโูุง | `/latest` |
| `/latest 10` | ุขุฎุฑู 10 ฺฉุงููฺฏ | `/latest 10` |

### โ๏ธ **ุฏุณุชูุฑุงุช ุชูุธูุงุช**

| ุฏุณุชูุฑ | ุชูุถุญ | ูุซุงู |
|-------|-------|------|
| `/subscribe` | ุงุดุชุฑุงฺฉ ุฏุฑ ุขูพุฏุชโูุง | `/subscribe` |
| `/unsubscribe` | ูุบู ุงุดุชุฑุงฺฉ | `/unsubscribe` |

### ๐ **ุฏุณุชูุฑุงุช ุงุฏูู**

| ุฏุณุชูุฑ | ุชูุถุญ | ูุซุงู |
|-------|-------|------|
| `/admin` | ููู ุงุฏูู | `/admin` |
| `/admin stats` | ุขูุงุฑ ุชูุตู | `/admin stats` |
| `/admin users` | ูุณุช ฺฉุงุฑุจุฑุงู | `/admin users` |
| `/admin broadcast` | ุงุฑุณุงู ูพุงู ุจู ููู | `/admin broadcast ุณูุงู` |

---

## ๐๏ธ ุชูุณุนู

### ๐ **ุณุงุฎุชุงุฑ ูุงูโูุง**

```
telegram_bot_enhanced.py     # ุฑุจุงุช ุงุตู
test_enhanced_telegram_bot.py # ุชุณุชโูุง
TELEGRAM_BOT_GUIDE.md        # ุงู ุฑุงูููุง
```

### ๐ง **ุงุถุงูู ฺฉุฑุฏู ุฏุณุชูุฑ ุฌุฏุฏ**

```python
async def _handle_new_command(self, chat_id: int, user_session: UserSession, args: List[str]):
    """ุฏุณุชูุฑ ุฌุฏุฏ"""
    response_text = "ูพุงุณุฎ ุฏุณุชูุฑ ุฌุฏุฏ"
    await self.send_message(chat_id, response_text)

# ุฏุฑ ุชุงุจุน handle_command ุงุถุงูู ฺฉูุฏ:
elif command == 'newcommand':
    await self._handle_new_command(chat_id, user_session, parts[1:])
```

### ๐ง **ุงุถุงูู ฺฉุฑุฏู ููุจุน ุฌุฏุฏ**

```python
# ุฏุฑ ูุงู telegram_collector.py
TELEGRAM_SOURCES.append(
    TelegramSource(
        channel_id="@new_channel",
        channel_name="New Channel",
    )
)
```

---

## โ ุนุจโุงุจ

### ๐ด **ูุดฺฉูุงุช ุฑุงุฌ**

#### 1. **ุฎุทุง SSL Certificate**

```
SSLCertVerificationError: certificate verify failed
```

**ุฑุงูโุญู:**

```python
# ุฏุฑ ูุงู telegram_bot_enhanced.py
connector = aiohttp.TCPConnector(ssl=False)
```

#### 2. **ุฎุทุง Bot Token**

```
Unauthorized: Invalid token
```

**ุฑุงูโุญู:**

- Bot Token ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ุงุฒ BotFather ุฏูุจุงุฑู ุฏุฑุงูุช ฺฉูุฏ
- ุฏุฑ ูุงู `.env` ูุฑุงุฑ ุฏูุฏ

#### 3. **ุฎุทุง Connection**

```
Cannot connect to host api.telegram.org
```

**ุฑุงูโุญู:**

- ุงุชุตุงู ุงูุชุฑูุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุงุฑูุงู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- VPN ุงุณุชูุงุฏู ฺฉูุฏ

#### 4. **ุฎุทุง Permission**

```
Forbidden: bot was blocked by the user
```

**ุฑุงูโุญู:**

- ฺฉุงุฑุจุฑ ุจุงุฏ ุฑุจุงุช ุฑุง unblock ฺฉูุฏ
- ุง ุงุฒ chat_id ุฏฺฏุฑ ุงุณุชูุงุฏู ฺฉูุฏ

### ๐ **ูุงฺฏโฺฏุฑ**

```python
# ูุนุงูโุณุงุฒ ูุงฺฏโฺฏุฑ ุชูุตู
logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s - %(levelname)s - %(message)s'
)
```

### ๐ **ูุธุงุฑุช ุจุฑ ุนููฺฉุฑุฏ**

```python
# ุงุถุงูู ฺฉุฑุฏู ุขูุงุฑ ุนููฺฉุฑุฏ
async def get_performance_stats(self):
    return {
        'total_users': len(self.user_sessions),
        'total_requests': self.stats.total_requests,
        'active_users_today': len([u for u in self.user_sessions.values() 
                                 if (datetime.now() - u.last_activity).days < 1])
    }
```

---

## ๐ฏ **ูุชุฌูโฺฏุฑ**

Telegram Bot ุจุฑุง V2Ray Collector ฺฉ ุงุจุฒุงุฑ ูุฏุฑุชููุฏ ู ฺฉุงูู ุงุณุช ฺฉู:

- โ **ุขุณุงู**: ุงุณุชูุงุฏู ุณุงุฏู ุจุฑุง ฺฉุงุฑุจุฑุงู
- โ **ูุฏุฑุชููุฏ**: ุชูุงู ูุงุจูุชโูุง ููุฑุฏ ูุงุฒ
- โ **ูุงุจู ุชูุณุนู**: ุงูฺฉุงู ุงุถุงูู ฺฉุฑุฏู ูฺฺฏโูุง ุฌุฏุฏ
- โ **ูุณุชูุฏ**: ุฑุงูููุง ฺฉุงูู ู ูุงุถุญ
- โ **ูพุงุฏุงุฑ**: ุชุณุช ุดุฏู ู ูุงุจู ุงุนุชูุงุฏ

### ๐ **ูุฑุงุญู ุจุนุฏ**

1. **Deploy**: ุฑุงูโุงูุฏุงุฒ ุฑู ุณุฑูุฑ
2. **Webhook**: ุชูุธู webhook ุจุฑุง production
3. **Monitoring**: ูุธุงุฑุช ุจุฑ ุนููฺฉุฑุฏ
4. **Updates**: ุจุฑูุฒุฑุณุงูโูุง ูุฏุงูู
5. **Features**: ุงุถุงูู ฺฉุฑุฏู ูฺฺฏโูุง ุฌุฏุฏ

---

**๐ค ุฑุจุงุช ุดูุง ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช!**

ุจุฑุง ุดุฑูุน:

```bash
python telegram_bot_enhanced.py
```

ู ุณูพุณ ุฏุฑ ุชูฺฏุฑุงู ุจู `@v2ray_collector_bot` ูพุงู ุฏูุฏ ู `/start` ุฑุง ุงุฑุณุงู ฺฉูุฏ.
